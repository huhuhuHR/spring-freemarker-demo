package com.huo.tools;import java.io.*;import java.util.Scanner;/** * D:\warehouse\scms-admin-web\src\main\webapp\WEB-INF\ftl_macro\pager.ftl * D:\warehouse\scms-admin-web\target\scms-admin\WEB-INF\ftl_macro\pager.ftl * * D:\warehouse\scms-admin-web\src\main\webapp\cms-res\js\appTemplate.js * D:\warehouse\scms-admin-web\target\scms-admin\cms-res\js\appTemplate.js * * D:\warehouse\scms-admin-web\ * * \WEB-INF\ftl_macro\pager.ftl */public class HotDeploy {    private static final String UTF_8 = "utf-8";    // 这边写活就是和任何工程了    private static final String PACKAGE_NAME = "scms-admin";    public static void main(String[] args) {        Scanner scanner = new Scanner(System.in);        System.out.println(                "input ftl or js path,it will replace same name file under target which is package by project");        String sourcePath = scanner.nextLine();        if (sourcePath == null || "".equals(sourcePath.trim())) {            System.out.println("source is blank");            return;        }        for (String source : sourcePath.split(",")) {            copyFileToPath(source);        }    }    private static void copyFileToPath(String source) {        File fileSource = new File(source);        if (!fileSource.exists()) {            System.out.println("source is not exists");            return;        }        String target = getSameNameUnderTarget(source);        try {            copy(source, target);        } catch (Exception e) {            System.out.println("copy:" + source + "to:" + target + " is fail,reason is " + e.getMessage());        }        System.out.println("source:\n" + source + "\ncopy to:\n" + target);    }    private static String getSameNameUnderTarget(String source) {        String codeHourse = getCodeHourse(source);        String target = "";        // 默认ftl文件都是在WEB-INF下面的        if (source.endsWith(".ftl")) {            int indexOf = source.indexOf("WEB-INF");            String suffix = codeHourse + "target" + File.separator + PACKAGE_NAME + File.separator;            target = suffix + source.substring(indexOf, source.length());        }        // 默认js文件都是webapp下面的        if (source.endsWith(".js")) {            int indexOf = source.indexOf("webapp");            String suffix = codeHourse + "target" + File.separator + PACKAGE_NAME + File.separator;            target = suffix + source.substring(indexOf + 7, source.length());        }        return target;    }    private static String getCodeHourse(String source) {        int index = source.indexOf("src");        return source.substring(0, index);    }    private static void copy(String source, String target) throws Exception {        BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(source), UTF_8));        File fileTarget = new File(target);        if (fileTarget.exists()) {            if (fileTarget.delete()) {                System.out.println("delete success");            }        }        if (fileTarget.createNewFile()) {            System.out.println("new File create success");        }        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(fileTarget), UTF_8));        char[] chars = new char[1024 * 5];        int length = -1;        while ((length = br.read(chars)) != -1) {            bw.write(chars, 0, length);        }        bw.flush();        br.close();        bw.close();    }}