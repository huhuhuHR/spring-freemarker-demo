package com.huo.interceptor;import org.springframework.http.server.ServerHttpRequest;import org.springframework.http.server.ServerHttpResponse;import org.springframework.http.server.ServletServerHttpRequest;import org.springframework.web.socket.WebSocketHandler;import org.springframework.web.socket.server.support.HttpSessionHandshakeInterceptor;import javax.servlet.http.HttpServletRequest;import java.util.Arrays;import java.util.Map;/** * WebSocket拦截器 *  * @author WANG * */public class SpringWebSocketHandlerInterceptor extends HttpSessionHandshakeInterceptor {    @Override    public boolean beforeHandshake(ServerHttpRequest request, ServerHttpResponse response, WebSocketHandler wsHandler,            Map<String, Object> attributes) throws Exception {//        if (request instanceof ServletServerHttpRequest) {//            ServletServerHttpRequest servletRequest = (ServletServerHttpRequest) request;//            HttpServletRequest request1 = servletRequest.getServletRequest();//            String[] pageIds = request1.getParameter("pageId").split(",");//            attributes.put("pageIds", Arrays.asList(pageIds));//        }        return super.beforeHandshake(request, response, wsHandler, attributes);    }    @Override    public void afterHandshake(ServerHttpRequest request, ServerHttpResponse response, WebSocketHandler wsHandler,            Exception ex) {        super.afterHandshake(request, response, wsHandler, ex);    }}